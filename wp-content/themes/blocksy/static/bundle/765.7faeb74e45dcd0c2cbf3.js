"use strict";(globalThis.blocksyJsonP=globalThis.blocksyJsonP||[]).push([[765],{765:function(e,t,r){r.r(t),r.d(t,{mount:function(){return p}});var i=r(194),n=r.n(i),o=r(601),a=r.n(o);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let u=null;const d={},f=function(e){let{variation:t,productId:r,isQuickView:i}=e,n=new URL(ct_localizations.ajax_url),o=new URLSearchParams(n.search.slice(1));return o.append("action","blocksy_get_product_view_for_variation"),o.append("variation_id",t.variation_id),o.append("product_id",r),o.append("is_quick_view",i),n.search=`?${o.toString()}`,n.toString()},m=function(e){let{container:t,image:r}=e;const i=[];[".woocommerce-product-gallery > .ct-image-container",".woocommerce-product-gallery .flexy-items > *:first-child > *",".woocommerce-product-gallery .flexy-pills > ol > *:first-child > *"].map((function(e){t.parentNode.querySelector(e)&&i.push(t.parentNode.querySelector(e))})),i.map((function(e){if(e.href&&(e.href=r.full_src),e.dataset.height&&(e.dataset.height=r.full_src_h),e.dataset.width&&(e.dataset.width=r.full_src_w),[...e.querySelectorAll(".zoomImg")].map((function(e){e.remove()})),[...e.querySelectorAll("img")].map((function(e){e.matches(".zoomImg")||(e.getAttribute("width")&&(e.width=r.width||(e.closest(".flexy-pills")?r.gallery_thumbnail_src_w:r.src_w)),e.getAttribute("height")&&(e.height=r.height||(e.closest(".flexy-pills")?r.gallery_thumbnail_src_h:r.src_h)),e.src=e.closest(".flexy-pills")?r.gallery_thumbnail_src:r.src,r.srcset&&e.srcset&&"false"!==r.srcset?e.srcset=r.srcset:e.removeAttribute("srcset"))})),n().fn.zoom&&(window.wp&&wp.customize&&wp.customize("has_product_single_zoom")&&"yes"===wp.customize("has_product_single_zoom")()||!window.wp||!wp.customize)){const t=e.getBoundingClientRect();parseFloat(e.getAttribute("data-width"))>e.closest(".woocommerce-product-gallery").getBoundingClientRect().width&&n()(e).zoom(l(l({url:e.href,touch:!1,duration:50},t.width>parseFloat(e.dataset.width)||t.height>parseFloat(e.dataset.height)?{magnify:2}:{}),function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}()?{on:"toggle"}:{}))}}))},p=function(e){n()&&n().fn&&n().fn.wc_variations_image_update&&(u=n().fn.wc_variations_image_update,n().fn.wc_variations_image_update=function(t){const r=this[0];if(r.closest(".woobt-products")||r.closest(".upsells")||r.closest(".related"))return;const i=e.closest(".product").querySelector(".woocommerce-product-gallery");let n=i.closest(".type-product"),o="no",c=n.id.replace("product-","");c||(c=i.closest('[class*="ct-quick-view"]').querySelector("[data-product_id]").dataset.product_id,c&&(o="yes"));const s=JSON.parse(e.dataset.product_variations);let u=!1,p=!1;if(s&&(u=!!t.variation_id&&s.find((function(e){let{variation_id:r}=e;return parseInt(r)===parseInt(t.variation_id)})),p=!!i.dataset.currentVariation&&s.find((function(e){let{variation_id:t}=e;return parseInt(t)===parseInt(i.dataset.currentVariation)}))),!t.variation_id&&!i.dataset.currentVariation)return;if(parseInt(t.variation_id)===parseInt(i.dataset.currentVariation))return;t.variation_id?i.dataset.currentVariation=t.variation_id:i.removeAttribute("data-current-variation");const y=s&&[u,p].every((function(e){return!e||"default"===e.blocksy_gallery_source}));if(y)return void function(e){let{container:t,currentVariationObj:r,nextVariationObj:i}=e;const n=r?l({id:r.image_id},r.image):(i||{}).blocksy_original_image,o=i?l({id:i.image_id},i.image):(r||{}).blocksy_original_image;if(o&&parseFloat(o.id)!==parseFloat(n.id)){if(t.querySelector(".flexy-pills > *")){let e=t.querySelector(`.flexy-items [srcset*="${o.src}"]`);if(e){let r=[...t.querySelector(".flexy-items").children].indexOf(e.closest("div"));const n=t.querySelector(".flexy-pills > *").children[r];if(n)return t.querySelector("[data-flexy]").dataset.flexy.indexOf("no")>-1?(t.querySelector("[data-flexy]").forcedMount&&t.querySelector("[data-flexy]").forcedMount(),void setTimeout((function(){i&&m({container:t,image:i.blocksy_original_image}),n.click()}),500)):(i&&m({container:t,image:i.blocksy_original_image}),void n.click())}}if(m({container:t,image:o}),t.querySelector(".flexy-pills > *")){const e=t.querySelector(".flexy-pills > *").children[0];e&&e.click()}}}({container:i,nextVariationObj:u,currentVariationObj:p});const g=function(e){const t=document.createElement("div");t.innerHTML=e,[...t.firstElementChild.children].map((function(e,t){e.matches(".flexy-container, .ct-image-container, .ct-before-gallery")||e.remove()})),[...i.children].map((function(e,r){e.matches(".flexy-container, .ct-image-container")&&e.insertAdjacentHTML("beforebegin",t.firstElementChild.innerHTML),e.matches(".flexy-container, .ct-image-container, .ct-before-gallery")&&e.remove()})),i.hasLazyLoadClickHoverListener=!1,setTimeout((function(){a().trigger("blocksy:frontend:init"),i.removeAttribute("data-state")}))};if(t.blocksy_gallery_html)return void g(t.blocksy_gallery_html);i.removeAttribute("style"),requestAnimationFrame((function(){i.dataset.state="loading"}));let _=s?s.find((function(e){return d[f({variation:e,productId:c,isQuickView:o})]&&e.image_id===t.image_id&&"default"===t.blocksy_gallery_source&&"default"===e.blocksy_gallery_source})):null;var h;(h=f({variation:_||t,productId:c,isQuickView:o}),d[h]?new Promise((function(e){e(d[h]),d[h]=d[h].clone()})):new Promise((function(e){return fetch(h).then((function(t){e(t),d[h]=t.clone()}))}))).then((function(e){return e.json()})).then((function(e){let{success:t,data:r}=e;t&&g(r.html)}))})}}}]);
//# sourceMappingURL=765.7faeb74e45dcd0c2cbf3.js.map