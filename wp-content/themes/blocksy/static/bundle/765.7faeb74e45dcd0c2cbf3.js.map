{"version":3,"file":"765.7faeb74e45dcd0c2cbf3.js","mappings":"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","sources":["webpack://ctFrontend/./static/js/frontend/woocommerce/variable-products.js"],"sourcesContent":["import $ from 'jquery'\nimport ctEvents from 'ct-events'\n\nlet originalImageUpdate = null\n\nconst store = {}\n\nfunction isTouchDevice() {\n\ttry {\n\t\tdocument.createEvent('TouchEvent')\n\t\treturn true\n\t} catch (e) {\n\t\treturn false\n\t}\n}\n\nconst cachedFetch = (url) =>\n\tstore[url]\n\t\t? new Promise((resolve) => {\n\t\t\t\tresolve(store[url])\n\t\t\t\tstore[url] = store[url].clone()\n\t\t  })\n\t\t: new Promise((resolve) =>\n\t\t\t\tfetch(url).then((response) => {\n\t\t\t\t\tresolve(response)\n\t\t\t\t\tstore[url] = response.clone()\n\t\t\t\t})\n\t\t  )\n\nconst makeUrlFor = ({ variation, productId, isQuickView }) => {\n\tlet url = new URL(ct_localizations.ajax_url)\n\tlet params = new URLSearchParams(url.search.slice(1))\n\n\tparams.append('action', 'blocksy_get_product_view_for_variation')\n\tparams.append('variation_id', variation.variation_id)\n\tparams.append('product_id', productId)\n\tparams.append('is_quick_view', isQuickView)\n\n\turl.search = `?${params.toString()}`\n\n\treturn url.toString()\n}\n\nconst replaceFirstImage = ({ container, image }) => {\n\tconst containersToReplace = []\n\n\tconst selectorsToTry = [\n\t\t'.woocommerce-product-gallery > .ct-image-container',\n\t\t'.woocommerce-product-gallery .flexy-items > *:first-child > *',\n\t\t'.woocommerce-product-gallery .flexy-pills > ol > *:first-child > *',\n\t]\n\n\tselectorsToTry.map((selector) => {\n\t\tif (container.parentNode.querySelector(selector)) {\n\t\t\tcontainersToReplace.push(\n\t\t\t\tcontainer.parentNode.querySelector(selector)\n\t\t\t)\n\t\t}\n\t})\n\n\tcontainersToReplace.map((imgContainer) => {\n\t\tif (imgContainer.href) {\n\t\t\timgContainer.href = image.full_src\n\t\t}\n\n\t\tif (imgContainer.dataset.height) {\n\t\t\timgContainer.dataset.height = image.full_src_h\n\t\t}\n\n\t\tif (imgContainer.dataset.width) {\n\t\t\timgContainer.dataset.width = image.full_src_w\n\t\t}\n\n\t\t;[...imgContainer.querySelectorAll('.zoomImg')].map((img) => {\n\t\t\timg.remove()\n\t\t})\n\t\t;[...imgContainer.querySelectorAll('img')].map((img) => {\n\t\t\tif (img.matches('.zoomImg')) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (img.getAttribute('width')) {\n\t\t\t\timg.width =\n\t\t\t\t\timage.width ||\n\t\t\t\t\t(img.closest('.flexy-pills')\n\t\t\t\t\t\t? image.gallery_thumbnail_src_w\n\t\t\t\t\t\t: image.src_w)\n\t\t\t}\n\n\t\t\tif (img.getAttribute('height')) {\n\t\t\t\timg.height =\n\t\t\t\t\timage.height ||\n\t\t\t\t\t(img.closest('.flexy-pills')\n\t\t\t\t\t\t? image.gallery_thumbnail_src_h\n\t\t\t\t\t\t: image.src_h)\n\t\t\t}\n\n\t\t\timg.src = img.closest('.flexy-pills')\n\t\t\t\t? image.gallery_thumbnail_src\n\t\t\t\t: image.src\n\n\t\t\tif (image.srcset && img.srcset && image.srcset !== 'false') {\n\t\t\t\timg.srcset = image.srcset\n\t\t\t} else {\n\t\t\t\timg.removeAttribute('srcset')\n\t\t\t}\n\t\t})\n\n\t\tif ($.fn.zoom) {\n\t\t\tif (\n\t\t\t\t(window.wp &&\n\t\t\t\t\twp.customize &&\n\t\t\t\t\twp.customize('has_product_single_zoom') &&\n\t\t\t\t\twp.customize('has_product_single_zoom')() === 'yes') ||\n\t\t\t\t!window.wp ||\n\t\t\t\t!wp.customize\n\t\t\t) {\n\t\t\t\tconst rect = imgContainer.getBoundingClientRect()\n\n\t\t\t\tif (\n\t\t\t\t\tparseFloat(imgContainer.getAttribute('data-width')) >\n\t\t\t\t\timgContainer\n\t\t\t\t\t\t.closest('.woocommerce-product-gallery')\n\t\t\t\t\t\t.getBoundingClientRect().width\n\t\t\t\t) {\n\t\t\t\t\t$(imgContainer).zoom({\n\t\t\t\t\t\turl: imgContainer.href,\n\t\t\t\t\t\ttouch: false,\n\t\t\t\t\t\tduration: 50,\n\n\t\t\t\t\t\t...(rect.width >\n\t\t\t\t\t\t\tparseFloat(imgContainer.dataset.width) ||\n\t\t\t\t\t\trect.height > parseFloat(imgContainer.dataset.height)\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\tmagnify: 2,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: {}),\n\n\t\t\t\t\t\t...(isTouchDevice()\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\ton: 'toggle',\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: {}),\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n}\n\nconst performInPlaceUpdate = ({\n\tcontainer,\n\tcurrentVariationObj,\n\tnextVariationObj,\n}) => {\n\tconst currentImage = currentVariationObj\n\t\t? { id: currentVariationObj.image_id, ...currentVariationObj.image }\n\t\t: (nextVariationObj || {}).blocksy_original_image\n\n\tconst nextImage = nextVariationObj\n\t\t? { id: nextVariationObj.image_id, ...nextVariationObj.image }\n\t\t: (currentVariationObj || {}).blocksy_original_image\n\n\tif (!nextImage) {\n\t\treturn\n\t}\n\n\tif (parseFloat(nextImage.id) === parseFloat(currentImage.id)) {\n\t\treturn\n\t}\n\n\t// Attempt slide to image\n\n\tif (container.querySelector(`.flexy-pills > *`)) {\n\t\tlet maybePillImage = container.querySelector(\n\t\t\t`.flexy-items [srcset*=\"${nextImage.src}\"]`\n\t\t)\n\n\t\tif (maybePillImage) {\n\t\t\tlet pillIndex = [\n\t\t\t\t...container.querySelector(`.flexy-items`).children,\n\t\t\t].indexOf(maybePillImage.closest('div'))\n\n\t\t\tconst pill =\n\t\t\t\tcontainer.querySelector(`.flexy-pills > *`).children[pillIndex]\n\n\t\t\tif (pill) {\n\t\t\t\tif (\n\t\t\t\t\tcontainer\n\t\t\t\t\t\t.querySelector('[data-flexy]')\n\t\t\t\t\t\t.dataset.flexy.indexOf('no') > -1\n\t\t\t\t) {\n\t\t\t\t\tif (container.querySelector('[data-flexy]').forcedMount) {\n\t\t\t\t\t\tcontainer.querySelector('[data-flexy]').forcedMount()\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (nextVariationObj) {\n\t\t\t\t\t\t\treplaceFirstImage({\n\t\t\t\t\t\t\t\tcontainer,\n\t\t\t\t\t\t\t\timage: nextVariationObj.blocksy_original_image,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpill.click()\n\t\t\t\t\t}, 500)\n\n\t\t\t\t\treturn\n\t\t\t\t} else {\n\t\t\t\t\tif (nextVariationObj) {\n\t\t\t\t\t\treplaceFirstImage({\n\t\t\t\t\t\t\tcontainer,\n\t\t\t\t\t\t\timage: nextVariationObj.blocksy_original_image,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tpill.click()\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Replace 1st image\n\n\treplaceFirstImage({ container, image: nextImage })\n\n\tif (container.querySelector(`.flexy-pills > *`)) {\n\t\tconst pill = container.querySelector(`.flexy-pills > *`).children[0]\n\n\t\tif (pill) {\n\t\t\tpill.click()\n\t\t}\n\t}\n}\n\nexport const mount = (el) => {\n\tif (!$ || !$.fn || !$.fn.wc_variations_image_update) {\n\t\treturn\n\t}\n\n\toriginalImageUpdate = $.fn.wc_variations_image_update\n\n\t$.fn.wc_variations_image_update = function (variation) {\n\t\tconst currentElement = this[0]\n\n\t\tif (\n\t\t\tcurrentElement.closest('.woobt-products') ||\n\t\t\tcurrentElement.closest('.upsells') ||\n\t\t\tcurrentElement.closest('.related')\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\tconst currentVariation = el\n\t\t\t.closest('.product')\n\t\t\t.querySelector('.woocommerce-product-gallery')\n\n\t\tlet productContainer = currentVariation.closest('.type-product')\n\n\t\tlet isQuickView = 'no'\n\n\t\tlet productId = productContainer.id.replace('product-', '')\n\n\t\tif (!productId) {\n\t\t\tproductId = currentVariation\n\t\t\t\t.closest('[class*=\"ct-quick-view\"]')\n\t\t\t\t.querySelector('[data-product_id]').dataset.product_id\n\n\t\t\tif (productId) {\n\t\t\t\tisQuickView = 'yes'\n\t\t\t}\n\t\t}\n\n\t\tconst allVariations = JSON.parse(el.dataset.product_variations)\n\n\t\tlet nextVariationObj = false\n\t\tlet currentVariationObj = false\n\n\t\tif (allVariations) {\n\t\t\tnextVariationObj = variation.variation_id\n\t\t\t\t? allVariations.find(\n\t\t\t\t\t\t({ variation_id }) =>\n\t\t\t\t\t\t\tparseInt(variation_id) ===\n\t\t\t\t\t\t\tparseInt(variation.variation_id)\n\t\t\t\t  )\n\t\t\t\t: false\n\t\t\tcurrentVariationObj = currentVariation.dataset.currentVariation\n\t\t\t\t? allVariations.find(\n\t\t\t\t\t\t({ variation_id }) =>\n\t\t\t\t\t\t\tparseInt(variation_id) ===\n\t\t\t\t\t\t\tparseInt(currentVariation.dataset.currentVariation)\n\t\t\t\t  )\n\t\t\t\t: false\n\t\t}\n\n\t\tif (\n\t\t\t!variation.variation_id &&\n\t\t\t!currentVariation.dataset.currentVariation\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\tif (\n\t\t\tparseInt(variation.variation_id) ===\n\t\t\tparseInt(currentVariation.dataset.currentVariation)\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\tif (variation.variation_id) {\n\t\t\tcurrentVariation.dataset.currentVariation = variation.variation_id\n\t\t} else {\n\t\t\tcurrentVariation.removeAttribute('data-current-variation')\n\t\t}\n\n\t\tconst canDoInPlaceUpdate =\n\t\t\tallVariations &&\n\t\t\t[nextVariationObj, currentVariationObj].every((variation) => {\n\t\t\t\tif (!variation) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\n\t\t\t\treturn variation.blocksy_gallery_source === 'default'\n\t\t\t})\n\n\t\tif (canDoInPlaceUpdate) {\n\t\t\tperformInPlaceUpdate({\n\t\t\t\tcontainer: currentVariation,\n\t\t\t\tnextVariationObj,\n\t\t\t\tcurrentVariationObj,\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tconst acceptHtml = (html) => {\n\t\t\tconst div = document.createElement('div')\n\t\t\tdiv.innerHTML = html\n\t\t\t;[...div.firstElementChild.children].map((el, index) => {\n\t\t\t\tif (\n\t\t\t\t\t!el.matches(\n\t\t\t\t\t\t'.flexy-container, .ct-image-container, .ct-before-gallery'\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tel.remove()\n\t\t\t\t}\n\t\t\t})\n\t\t\t;[...currentVariation.children].map((el, index) => {\n\t\t\t\tif (el.matches('.flexy-container, .ct-image-container')) {\n\t\t\t\t\tel.insertAdjacentHTML(\n\t\t\t\t\t\t'beforebegin',\n\t\t\t\t\t\tdiv.firstElementChild.innerHTML\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tel.matches(\n\t\t\t\t\t\t'.flexy-container, .ct-image-container, .ct-before-gallery'\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tel.remove()\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tcurrentVariation.hasLazyLoadClickHoverListener = false\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tctEvents.trigger('blocksy:frontend:init')\n\t\t\t\tcurrentVariation.removeAttribute('data-state')\n\t\t\t})\n\t\t}\n\n\t\tif (variation.blocksy_gallery_html) {\n\t\t\tacceptHtml(variation.blocksy_gallery_html)\n\t\t\treturn\n\t\t}\n\n\t\tcurrentVariation.removeAttribute('style')\n\t\trequestAnimationFrame(() => {\n\t\t\tcurrentVariation.dataset.state = 'loading'\n\t\t})\n\n\t\tlet maybeLoadedVariation = allVariations\n\t\t\t? allVariations.find(\n\t\t\t\t\t(nestedVariation) =>\n\t\t\t\t\t\tstore[\n\t\t\t\t\t\t\tmakeUrlFor({\n\t\t\t\t\t\t\t\tvariation: nestedVariation,\n\t\t\t\t\t\t\t\tproductId,\n\t\t\t\t\t\t\t\tisQuickView,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t] &&\n\t\t\t\t\t\tnestedVariation.image_id === variation.image_id &&\n\t\t\t\t\t\tvariation.blocksy_gallery_source === 'default' &&\n\t\t\t\t\t\tnestedVariation.blocksy_gallery_source === 'default'\n\t\t\t  )\n\t\t\t: null\n\n\t\tcachedFetch(\n\t\t\tmakeUrlFor({\n\t\t\t\tvariation: maybeLoadedVariation || variation,\n\t\t\t\tproductId,\n\t\t\t\tisQuickView,\n\t\t\t}),\n\t\t\t{\n\t\t\t\tmethod: 'POST',\n\t\t\t}\n\t\t)\n\t\t\t.then((response) => response.json())\n\t\t\t.then(({ success, data }) => {\n\t\t\t\tif (!success) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tacceptHtml(data.html)\n\t\t\t})\n\t}\n}\n"],"names":["originalImageUpdate","store","makeUrlFor","variation","productId","isQuickView","url","URL","ct_localizations","ajax_url","params","URLSearchParams","search","slice","append","variation_id","toString","replaceFirstImage","container","image","containersToReplace","map","selector","parentNode","querySelector","push","imgContainer","href","full_src","dataset","height","full_src_h","width","full_src_w","querySelectorAll","img","remove","matches","getAttribute","closest","gallery_thumbnail_src_w","src_w","gallery_thumbnail_src_h","src_h","src","gallery_thumbnail_src","srcset","removeAttribute","$","window","wp","customize","rect","getBoundingClientRect","parseFloat","zoom","touch","duration","magnify","document","createEvent","e","isTouchDevice","on","mount","el","currentElement","this","currentVariation","productContainer","id","replace","product_id","allVariations","JSON","parse","product_variations","nextVariationObj","currentVariationObj","find","parseInt","canDoInPlaceUpdate","every","blocksy_gallery_source","currentImage","image_id","blocksy_original_image","nextImage","maybePillImage","pillIndex","children","indexOf","pill","flexy","forcedMount","setTimeout","click","performInPlaceUpdate","acceptHtml","html","div","createElement","innerHTML","firstElementChild","index","insertAdjacentHTML","hasLazyLoadClickHoverListener","ctEvents","blocksy_gallery_html","requestAnimationFrame","state","maybeLoadedVariation","nestedVariation","Promise","resolve","clone","fetch","then","response","json","success","data"],"sourceRoot":""}